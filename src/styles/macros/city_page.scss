@import "../utils/encode_svg.scss";

// Widgets
@mixin TestimonialWidget {
  .widget_testimonials {
    .widget_content {
      @apply h-32 overflow-y-scroll mb-0 px-3 py-2;
    }
  }
}

@mixin ReviewsSidebarWidget {
  .reviews_sidebar_widget {
    // Keep hidden, seems to be used on other sites
    @apply hidden;
  }
}

@mixin CityPageListWidget {
  .widget_citypage_list {
    @apply bg-red-400 float-left;
  }
}

@mixin CaseStudyWidget {
  .case_studies_widget {
    .case_study_thumb {
      @apply float-left mr-2 max-h-[100px] max-w-[125px];
    }

    .widget_item {
      @apply overflow-hidden mb-2;
    }

    .widget_moreurl {
      @apply clear-both;
    }
  }
}

@mixin PressReleaseWidget {
  .press_release_widget {
    .widget_item {
      @apply float-left mb-2;
    }

    .press_release_image {
      @apply max-h-[125px] overflow-hidden float-left;

      img {
        @apply w-[125px] mr-2;
      }
    }
  }
}

@mixin BeforeAfterSidebarWidget {
  .before_after_sidebar_widget {
    .widget_items {
      @apply overflow-hidden bg-white text-gray-900 text-xs leading-4 mb-2 px-3 py-2;

      .widget_item {
        .widget_item_thumb {
          @apply float-left mr-4;
        }

        .widget_item_title {
          @apply font-bold;
        }

        .widget_item_text {
          @apply py-2;
        }
      }
    }
  }
}

@mixin PhotoGalleryWidget {
  .photo_gallery_widget {
    .widget_item {
      @apply py-2;

      .photo_gallery_thumb {
        @apply inline h-[100px] w-[100px];
      }

      .widget_item_preview {
        @apply inline h-[100px] w-[70%] float-right;
      }
    }

    .widget_moreurl {
      @apply pt-4;
    }
  }
}

@mixin ContactWidget {
  .widget_contact {
    .widget_title {
      @apply bg-primary border-b-0;

      .citypage_contact_line1,
      .citypage_contact_line2 {
        @apply text-white text-center text-base;
      }
    }

    .widget_content {
      @apply bg-gray-100 mb-0;

      #contact_form {
        label {
          @apply font-bold text-xs text-gray-600 pb-1 inline-block;
        }

        > div {
          @apply mb-3;
        }

        select {
          @apply text-sm text-gray-800;
        }

        input {
          @apply w-full float-none text-sm;
        }

        textarea {
          @apply w-full float-none text-sm;
        }

        .state {
          @apply float-right w-[48%];
        }

        .zip {
          @apply w-[48%];
        }

        .phone {
          @apply clear-both;
        }

        #save {
          @apply inline-block text-sm px-6 py-3 font-semibold text-white no-underline rounded-md cursor-pointer transition duration-200 bg-primary hover:opacity-90 text-center;
        }
      }
    }
  }
}

@mixin JobStoriesWidget {
  .widget_job_stories {
    .widget_item_title {
      @apply font-bold mb-2;
    }

    .widget_item {
      @apply border-b border-dotted border-gray-200 mb-2;

      &:last-child {
        @apply border-b-0;
      }
    }
  }
}

@mixin CityMapWidget {
  .widget_citypage_map {
    .widget_content {
      @apply px-0 py-0 bg-gray-100 mb-0;

      .citypage_map_legend {
        @apply px-3 py-2 border-t border-gray-900 border-opacity-20;

        > p {
          @apply text-sm pt-2;
        }

        .citypage-map-legend-item {
          @apply bg-no-repeat pl-9 float-left h-[30px] leading-7 m-1 font-bold;

          &.citypage-map-legend-item-testimonials {
            background-image: url(https://cdn.treehouseinternetgroup.com/cms_core/images/icons/chat-icon.png);
          }

          &.citypage-map-legend-item-reviews {
            background-image: url(https://cdn.treehouseinternetgroup.com/cms_core/images/icons/map-icon-review.png);
          }

          &.citypage-map-legend-item-jobs {
            background-image: url(https://cdn.treehouseinternetgroup.com/cms_core/images/icons/citypage-lead.png);
          }
        }
      }
    }
  }
}

.citypage_index {
  // I do not know what this is??
  .citypage_2col_widget_wrapper {
    @apply hidden;
  }

  .citypage_text_generated_content {
    @apply clear-both;

    .citypage_text_noobligation {
      @apply mb-2;
    }

    .citypage_text_responsible {
      @apply clear-both;
    }
  }

  .citypage_sidebar {
    @apply ml-2 float-right w-[220px];
  }

  .citypage_main_content {
    @apply pr-0;
  }

  .citypage_testimonial_main {
    @apply px-3 py-3 pl-8 overflow-hidden border-none mb-2 mt-1;

    @screen sm {
      @apply p-5 pl-8 text-center;
    }

    .text {
      @apply text-lg text-gray-900 font-light italic relative leading-6 mb-2;
      $icon-color: #5f5f5f;

      &::before {
        content: svg-encode(
          '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path fill="#{$icon-color}" d="M4.583 17.321C3.553 16.227 3 15 3 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 0 1-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179zm10 0C13.553 16.227 13 15 13 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 0 1-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179z"/></svg>'
        );

        @apply w-5 h-5 absolute -left-2 top-0 transform -translate-x-full;
      }
      span {
        @apply inline relative;
        &::after {
          content: svg-encode(
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path fill="#{$icon-color}" d="M19.417 6.679C20.447 7.773 21 9 21 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311-1.804-.167-3.226-1.648-3.226-3.489a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179zm-10 0C10.447 7.773 11 9 11 10.989c0 3.5-2.457 6.637-6.03 8.188l-.893-1.378c3.335-1.804 3.987-4.145 4.247-5.621-.537.278-1.24.375-1.929.311C4.591 12.322 3.17 10.841 3.17 9a3.5 3.5 0 0 1 3.5-3.5c1.073 0 2.099.49 2.748 1.179z"/></svg>'
          );
          @apply w-5 h-5 absolute -right-2 top-0 transform translate-x-full;
        }
      }
    }

    .author {
      a {
        @apply text-sm text-primary font-semibold;
      }
    }
  }

  @include TestimonialWidget();
  @include ReviewsSidebarWidget();
  @include CityPageListWidget();
  @include CaseStudyWidget();
  @include PressReleaseWidget();
  @include BeforeAfterSidebarWidget();
  @include PhotoGalleryWidget();
  @include ContactWidget();
  @include JobStoriesWidget();
  @include CityMapWidget();
}

.citypage_main_content {
  overflow: auto;
  padding-right: 10px;
}

div[class*="citypage"] {
  .lists {
    table {
      width: 100%;
      background: 0 0;
      border: 0;
    }
  }

  div {
    table {
      width: 100%;
      background: 0 0;
      border: 0;
    }
  }

  table {
    ul {
      padding: 0;
      margin-top: 10px;
    }
  }
}

@media screen and (min-width: 961px) {
  .citypage_index {
    .citypage_sidebar {
      width: 300px !important;
      margin-left: 30px !important;
    }
  }
}

@media screen and (max-width: 960px) {
  .citypage_index {
    .citypage_sidebar {
      width: 100% !important;
      float: none;
      margin-left: 0 !important;
    }
  }

  .widget_contact {
    .widget_title {
      background: theme("colors.primary") !important;
    }
  }
}
